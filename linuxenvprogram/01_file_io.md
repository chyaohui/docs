目录：
---

> 文件 IO 是操作系统不可或缺的部分，也是实现数据持久化的手段。对于 Linux `一切皆文件` 的思想更说明了文件在 Linux 内核中的重要位置。

## 1、Linux中的文件
### 1.1 文件、文件描述符和文件表
* **狭义的文件**是指文件系统的物理文件，而**广义的文件**则可以是 Linux 管理的所有对象，包括设备、管道、内存等。这些广义的文件利用 `VFS` 机制，以文件系统的形式挂载在 Linux 内核中，对外提供一致的文件操作接口。

* 文件描述符是一个非负整数，本质上就是一个**句柄**。一切对用户透明的返回值，即可视为句柄。用户空间利用文件描述符与内核进行交互；而内核拿到文件描述符后，可以通过它得到用于管理文件的真正的数据结构。

* 使用文件描述符有两个**好处**：一是增加了安全性，句柄对用户完全透明，用户无法通过任何方式更改句柄对应的内部结果；二是增加了可扩展性，用户代码只依赖于句柄的值，实际结构的类型和与句柄的映射关系都随时可以变化，不会影响现有的用户代码。

* Linux 的每个进程都会维护一个**文件表**，以便维护该进程打开文件的信息，包括打开的文件的个数、每个打开文件的偏移量等信息。

### 1.2 内核文件表的实现

